(window["webpackJsonptake-home-react-ui"]=window["webpackJsonptake-home-react-ui"]||[]).push([[0],{154:function(e,t,n){e.exports=n(368)},174:function(e,t){},176:function(e,t){},208:function(e,t){},209:function(e,t){},274:function(e,t){},367:function(e,t,n){},368:function(e,t,n){"use strict";n.r(t);var a=n(153),c=n.n(a),o=n(2),r=n.n(o),l=n(58),u=n(159).defaults({baseUrl:"http://localhost:5000"});function m(e){var t=Object(o.useState)([]),n=Object(l.a)(t,2),a=n[0],c=n[1];return Object(o.useEffect)(function(){e.comments&&function(){var t=!0,n=!1,a=void 0;try{for(var o,r=e.comments[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var l=o.value;u("/api/comment/".concat(l),function(e,t,n){c(function(e){return e.concat([JSON.parse(n)])})})}}catch(m){n=!0,a=m}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}}()},[e.postId,e.comments]),r.a.createElement("div",{className:"post-wrapper"},r.a.createElement("article",{className:"post"},r.a.createElement("div",null,r.a.createElement("h1",null,e.body),r.a.createElement("h2",null,"by ",e.author))),r.a.createElement("footer",null,r.a.createElement("a",{href:"#",onClick:e.onDelete},"Delete this post")),r.a.createElement("div",{className:"comments"},r.a.createElement("h5",null,"Comments"),a.map(function(e,t){return r.a.createElement(s,{key:e.uid,author:e.author,body:e.body})})))}function s(e){return r.a.createElement("div",{className:"comment"},r.a.createElement("main",null,r.a.createElement("p",null,r.a.createElement("div",{className:"comment-author"},e.author,":"),e.body)))}var i=function(){var e=Object(o.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1];Object(o.useEffect)(function(){u.get("/api/posts",function(e,t,n){a(JSON.parse(n))})},[]);var c=Object(o.useCallback)(function(e){e.preventDefault();var t=e.target.elements,n={author:t.author.value,body:t.body.value};u.post({url:"/api/posts",form:n},function(e,t,n){a(function(e){return[JSON.parse(n)].concat(e)})})},[]),s=Object(o.useCallback)(function(e){u.delete("/api/post/".concat(e),function(t,n,c){a(function(t){return t.filter(function(t){return t.postId!==e})})})},[]);return r.a.createElement("div",{className:"container"},r.a.createElement("aside",{className:"action-menu"},r.a.createElement("form",{onSubmit:c},r.a.createElement("div",null,r.a.createElement("h3",null,"Create new post:"),r.a.createElement("textarea",{name:"body",placeholder:"type stuff here"})),r.a.createElement("div",{className:"row"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"author"})),r.a.createElement("input",{type:"submit",value:"Submit Post"}))),r.a.createElement("main",{className:"content"},0===n.length?r.a.createElement("p",null,"Loading posts..."):n.map(function(e){return r.a.createElement(m,{key:e.postId,postId:e.postId,author:e.author,body:e.body,comments:e.comments,onDelete:function(){return s(e.postId)}})})))};n(367);c.a.render(r.a.createElement(i,null),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.fc3e1977.chunk.js.map